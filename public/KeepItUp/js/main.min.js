window.onload=function(){function e(){a(),gamee.gameReady(),gamee.emitter.addEventListener("start",function(e){L.stop(pe,ye),L.run(pe,ye),V.style.display="none",gamee.requestSocial(function(e,t){e||t&&t.socialData&&t.socialData.friends&&(j=[],z=0,t.socialData.friends.forEach(function(e){e.highScore>R&&j.push(e)}),j.length>0&&(oe.classList.add("is--active"),v()))}),i(),o(),d(),s();var t={x:M/2,y:I},n=g(-10,10);TweenLite.to(t,.3,{ease:Power4.easeOut,y:I-110,onUpdate:function(){Matter.Body.set(fe,"position",{x:M/2+n,y:t.y})},onComplete:function(){V.style.display="none"}}),e.detail.callback()}),gamee.emitter.addEventListener("mute",function(e){D=!0,e.detail.callback()}),gamee.emitter.addEventListener("unmute",function(e){D=!1,e.detail.callback()}),gamee.emitter.addEventListener("pause",function(e){L.stop(pe),V.style.display="block",e.detail.callback()}),gamee.emitter.addEventListener("resume",function(e){L.run(pe,ye),V.style.display="none",e.detail.callback()})}function t(e){e=e||1,q+=e*P,j.length>0&&q>j[z-1].highScore&&(j.length>z?v():(oe.classList.remove("is--active"),re.classList.add("is--defeated"),setTimeout(function(){re.classList.remove("is--current")},300))),requestAnimationFrame(function(){h()}),gamee.updateScore(q,!1,function(e){if(null!==e)throw e})}function i(){P=1,U=0,q=0,a(),h(),gamee.updateScore(q,!1,function(e){if(null!==e)throw e})}function n(){R=q,a()}function a(){requestAnimationFrame(function(){Q.innerHTML=R})}function l(){U++,[3,8,13,23,43].includes(U)&&c(),r()}function o(){U=0}function r(){3>=U&&U>0?Y.style.transform="translate3d(0, 0, 0) scaleX("+100/3*U/100+")":8>=U&&U>3?Z.style.transform="translate3d(0, 0, 0) scaleX("+20*(U-3)/100+")":13>=U&&U>8?$.style.transform="translate3d(0, 0, 0) scaleX("+20*(U-8)/100+")":23>=U&&U>13?ee.style.transform="translate3d(0, 0, 0) scaleX("+10*(U-13)/100+")":43>=U&&U>23&&(te.style.transform="translate3d(0, 0, 0) scaleX("+5*(U-23)/100+")")}function s(){Y.style.transform="translate3d(0, 0, 0) scaleX(0)",Z.style.transform="translate3d(0, 0, 0) scaleX(0)",$.style.transform="translate3d(0, 0, 0) scaleX(0)",ee.style.transform="translate3d(0, 0, 0) scaleX(0)",te.style.transform="translate3d(0, 0, 0) scaleX(0)"}function c(){P*=2,p("multiplier"+P),requestAnimationFrame(function(){K.innerHTML=P,G.classList.add("multiplier-"+P)})}function d(){P=1,requestAnimationFrame(function(){K.innerHTML=1,G.classList=""})}function u(){if(J=!0,Matter.Body.setStatic(fe,!0),Matter.Body.set(fe,"position",{x:M/2,y:I+_}),V.style.display="block",gamee.gameSave(JSON.stringify({highScore:R}),!1,function(e){if(null!==e)throw e}),q>1)if(gamee.gameOver(),q>N)N=R;else{i(),o(),d(),s();var e={x:M/2,y:I+_},t=g(-10,10);TweenLite.to(e,.3,{ease:Power4.easeOut,y:I-110,onUpdate:function(){Matter.Body.set(fe,"position",{x:M/2+t,y:e.y})},onComplete:function(){V.style.display="none"}}),clearTimeout(T),ue.classList.add("is--active"),T=setTimeout(function(){ue.classList.remove("is--active")},1e3)}else{i(),o(),d(),s();var e={x:M/2,y:I+_},t=g(-10,10);TweenLite.to(e,.3,{ease:Power4.easeOut,y:I-110,onUpdate:function(){Matter.Body.set(fe,"position",{x:M/2+t,y:e.y})},onComplete:function(){V.style.display="none"}}),clearTimeout(T),ue.classList.add("is--active"),T=setTimeout(function(){ue.classList.remove("is--active")},1e3)}}function m(e){p("multiplierLost"),o(),d(),s(),"leftWall"==e?(ae.style.visibility="visible",setTimeout(function(){ae.style.visibility="hidden"},150)):"rightWall"==e&&(le.style.visibility="visible",setTimeout(function(){le.style.visibility="hidden"},150)),ie.style.visibility="visible",setTimeout(function(){ie.style.visibility="hidden"},150)}function y(){p("kick"+g(1,3)),t(),l()}function g(e,t){return Math.floor(Math.random()*(t+1-e)+e)}function p(e){if(!D)switch(e){case"highscore":me.play("highscore");break;case"kick1":me.play("kick1");break;case"kick2":me.play("kick2");break;case"kick3":me.play("kick3");break;case"multiplier2":me.play("multiplier1");break;case"multiplier4":me.play("multiplier2");break;case"multiplier8":me.play("multiplier3");break;case"multiplier16":me.play("multiplier4");break;case"multiplier32":me.play("multiplier5");break;case"multiplierLost":me.play("multiplier_lost")}}function f(){ne.width=M,ne.height=I,h()}function h(){var e=ne.getContext("2d");e.clearRect(0,0,ne.width,ne.height);var t="300px";switch(q.toString().length){case 2:t="250px";break;case 3:t="180px";break;case 4:t="130px";break;case 5:t="100px"}e.font="normal normal 900 "+t+"/360px 'Barlow Semi Condensed'",e.textAlign="center",e.fillStyle="#ECECEC",e.fillText(q,M/2,370),e.font="normal normal 400 22px/22px 'Arial'",e.textAlign="center",e.fillStyle="#ECECEC",q>R&&(e.fillText("New Highscore!",M/2,410),n(),N>0&&J&&(p("highscore"),J=!1))}function v(){var e=document.createElement("img");e.src=j[z].avatar,se.innerHTML=j[z].name,ce.innerHTML=j[z].highScore,de.innerHTML="",de.appendChild(e),re.classList.add("is--current"),setTimeout(function(){re.classList.remove("is--next")},300),z++}window.scrollTo(0,1);var w=Matter.Engine,b=Matter.Render,k=Matter.World,B=Matter.Bodies,E=Matter.Events,x=Matter.MouseConstraint,S=Matter.Mouse,L=Matter.Runner,M=window.innerWidth>window.innerHeight?window.innerWidth<=window.innerHeight/2?window.innerWidth:window.innerHeight/2:window.innerWidth,I=window.innerHeight;console.log(M);var T,_=70,C=.4,A=5e-4,W=2,H=.3728/.66,X=.88,F=700,O=886,N=0,R=0,q=0,P=1,U=0,D=!1,J=!0,j=[],z=0,G=(document.getElementById("score"),document.getElementById("multiplierUI__wrap")),K=document.getElementById("multiplier"),Q=(document.getElementById("goalNet"),document.getElementById("goalNet__score"),document.getElementById("celeb_emoji"),document.getElementById("highscore")),V=(document.getElementById("highscore__wrap"),document.getElementById("clickOverlay")),Y=document.getElementById("background__1"),Z=document.getElementById("background__2"),$=document.getElementById("background__3"),ee=document.getElementById("background__4"),te=document.getElementById("background__5"),ie=document.getElementById("multiplierLost"),ne=document.getElementById("ui"),ae=document.getElementById("wallLeft"),le=document.getElementById("wallRight"),oe=document.getElementById("challenger__vs"),re=document.getElementById("challengerWrap1"),se=document.getElementById("challengerName1"),ce=document.getElementById("challengerScore1"),de=document.getElementById("challengerImgWrap1"),ue=document.getElementById("tryAgain"),me=new Howl({src:["./sounds/output.webm","./sounds/output.ogg","./sounds/output.m4a","./sounds/output.mp3","./sounds/output.ac3"],sprite:{highscore:[0,391.83673469387753],kick1:[2e3,208.97959183673453],kick2:[4e3,156.73469387755114],kick3:[6e3,182.8571428571433],multiplier_lost:[8e3,235.1020408163258],multiplier1:[1e4,339.5918367346944],multiplier2:[12e3,365.7142857142866],multiplier3:[14e3,313.4693877551023],multiplier4:[16e3,339.5918367346944],multiplier5:[18e3,339.5918367346944]}});gamee.gameInit("FullScreen",{},["saveState"],function(e,t){if(null!==e)throw e;if(t.saveState){var i=JSON.parse(t.saveState);R=i.highScore||0,N=R||0}a()});var ye=w.create();ye.world.gravity.scale=.0055;var ge=b.create({element:document.getElementById("game"),options:{height:I,width:M,wireframes:!1,background:"transparent",pixelRatio:1},engine:ye});b.lookAt(ge,{min:{x:0,y:0},max:{x:M,y:I}}),b.run(ge);var pe=L.create({isFixed:!0});L.run(pe,ye);var fe=B.circle(M/2,I-110,_,{id:"ball",friction:C,frictionAir:A,frictionStatic:W,density:H,restitution:X,render:{sprite:{texture:"./img/ball2x.png",xScale:.5,yScale:.5}},isStatic:!0}),he=B.rectangle(-50,I/2,60,2*I,{id:"leftWall",isStatic:!0}),ve=B.rectangle(M+50,I/2,60,2*I,{id:"rightWall",isStatic:!0}),we=B.rectangle(M/2,I+500,2*M,60,{id:"ground",isStatic:!0,isSensor:!0});k.add(ye.world,[he,ve,we,fe]);var be=S.create(ge.canvas),ke=x.create(ye,{mouse:be,constraint:{stiffness:0,render:{visible:!1}}});k.add(ye.world,ke),E.on(ke,"mousedown",function(e){var t=be.mousedownPosition.x,i=be.mousedownPosition.y,n=fe.position.x,a=fe.position.y,l=80;if(Math.pow(t-n,2)+Math.pow(i-a,2)<Math.pow(l,2)){fe.isStatic&&Matter.Body.setStatic(fe,!1);var o=(n-t)/l*F;Matter.Body.update(fe,0,0,0),Matter.Body.applyForce(fe,{x:fe.position.x,y:fe.position.y-l},{x:o,y:-O}),y()}}),E.on(ye,"collisionStart",function(e){for(var t=e.pairs,i=0,n=t.length;i!=n;++i){var a=t[i];"ball"==a.bodyA.id&&"leftWall"==a.bodyB.id||"ball"==a.bodyA.id&&"rightWall"==a.bodyB.id?m(a.bodyB.id):"ball"==a.bodyA.id&&"ground"==a.bodyB.id&&u()}}),e(),document.fonts.load('10pt "Barlow Semi Condensed"').then(f)};